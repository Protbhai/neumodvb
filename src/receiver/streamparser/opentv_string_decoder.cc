/*
 * freesat_huffman.c
 * Decode a Freesat huffman encoded buffer.
 * Once decoded the buffer can be used like a "standard" DVB buffer.
 *
 * Code originally authored for tv_grab_dvb_plus and subsequently modified
 * to integrate into tvheadend by Adam Sutton <dev@adamsutton.me.uk>
 *
 * Code speed improved by deeptho@gmail.com
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include "opentv_string_decoder.h"
#include "opentv_huffman.h"

#include "ssaccu.h"
#include <vector>

struct huff_data_t {
	std::vector<huff_entry_t> entries;
	uint16_t boundsx[256]{{}};

	huff_data_t(std::initializer_list<huff_entry_t> entries_)
		: entries(entries_) {
		int16_t j{0};
		int last_idx{-1};
		for (const auto& e: entries) {
			int idx = (e.code >> 24);
			for(int k= last_idx+1; k < idx; ++k) {
				boundsx[k] = boundsx[last_idx];
			}
			if(boundsx[idx]==0)
				boundsx[idx]  = j;
			last_idx = idx;
			++j;
		}

		for(int j= last_idx+1; j < 256; ++j) {
			boundsx[j] = boundsx[last_idx];
		}
		entries.push_back({0xffffffff, 0, 0, 0x0}); //avoids the need for some bounds checking

	}

	inline const huff_entry_t& decode_piece(uint32_t code, opentv_table_type_t t) const;

};


inline const huff_entry_t& huff_data_t::decode_piece(uint32_t code, opentv_table_type_t t) const {
	static huff_entry_t invalid{0x00000000, 0, 0, ""};
	int idx = code >> 24;
	auto first = boundsx[idx];
	//assert(first+1 < entries.size());
	auto& firste = entries[first];
	auto& laste = entries[first+1];
	bool multiple_matches = !((firste.code ^ laste.code) & 0xff000000);
	if(! multiple_matches) [[likely]] {
		return firste;
	}
	auto last = (idx <255)  ? boundsx[idx+1] : entries.size();

	huff_entry_t tofind(code, 32, 0, nullptr);

	auto found = lower_bound(entries.begin()+first, entries.begin()+last, tofind);
	//assert(found -entries.begin() >0);
	found--; //entry now points at prefix element, or current entry is incorrect
	auto &e = *found;
	unsigned int mask=std::numeric_limits<uint32_t>::max();
	mask >>= e.numbits;
	mask = ~mask;
	auto ret = (code&mask) == (e.code&mask);
	if(!ret)
		return invalid;
	return *found;
}


static huff_data_t sky_uk_data{
		{0x00000000, 4, 1, "s"},
		{0x10000000, 7, 0, ""},
		{0x12000000, 7, 1, "S"},
		{0x14000000, 10, 1, "4"},
		{0x14400000, 11, 1, ";"},
		{0x14600000, 12, 9, "Breakfast"},
		{0x14700000, 13, 6, "Europe"},
		{0x14780000, 14, 1, "/"},
		{0x147c0000, 14, 7, "English"},
		{0x14800000, 9, 1, "J"},
		{0x15000000, 8, 1, "P"},
		{0x16000000, 7, 1, "T"},
		{0x18000000, 6, 1, "w"},
		{0x1c000000, 6, 1, "p"},
		{0x20000000, 4, 1, "r"},
		{0x30000000, 4, 1, "o"},
		{0x40000000, 8, 1, "B"},
		{0x41000000, 9, 1, "O"},
		{0x41800000, 9, 19, "(Stereo) (Teletext)"},
		{0x42000000, 8, 1, "C"},
		{0x43000000, 11, 1, "!"},
		{0x43200000, 13, 7, "America"},
		{0x43280000, 13, 9, "Australia"},
		{0x43300000, 13, 8, "Business"},
		{0x43380000, 13, 5, "Drama"},
		{0x43400000, 10, 1, "9"},
		{0x43800000, 9, 8, "(Stereo)"},
		{0x44000000, 6, 1, "y"},
		{0x48000000, 5, 1, "d"},
		{0x50000000, 4, 1, "i"},
		{0x60000000, 4, 1, "t"},
		{0x70000000, 4, 1, "n"},
		{0x80000000, 7, 1, "k"},
		{0x82000000, 8, 1, "'"},
		{0x83000000, 9, 1, "L"},
		{0x83800000, 13, 4, "Hill"},
		{0x83880000, 13, 4, "Mark"},
		{0x83900000, 13, 5, "House"},
		{0x83980000, 14, 4, "Late"},
		{0x839c0000, 15, 12, "(Widescreen)"},
		{0x839e0000, 15, 9, "Education"},
		{0x83a00000, 11, 1, "&"},
		{0x83c00000, 10, 1, "3"},
		{0x84000000, 6, 1, "f"},
		{0x88000000, 9, 1, "G"},
		{0x88800000, 10, 1, "7"},
		{0x88c00000, 12, 4, "year"},
		{0x88d00000, 13, 3, "Get"},
		{0x88d80000, 14, 5, "Girls"},
		{0x88dc0000, 14, 6, "Golden"},
		{0x88e00000, 11, 4, "John"},
		{0x89000000, 8, 1, "M"},
		{0x8a000000, 10, 1, "2"},
		{0x8a400000, 10, 1, "6"},
		{0x8a800000, 13, 5, "Black"},
		{0x8a880000, 13, 4, "East"},
		{0x8a900000, 13, 4, "From"},
		{0x8a980000, 13, 9, "Headlines"},
		{0x8aa00000, 13, 4, "Home"},
		{0x8aa80000, 13, 3, "Man"},
		{0x8ab00000, 14, 5, "Learn"},
		{0x8ab40000, 14, 6, "Little"},
		{0x8ab80000, 13, 1, "Q"},
		{0x8ac00000, 11, 1, "8"},
		{0x8ae00000, 12, 1, "*"},
		{0x8af00000, 13, 9, "Including"},
		{0x8af80000, 13, 4, "Bill"},
		{0x8b000000, 8, 1, "-"},
		{0x8c000000, 6, 1, "g"},
		{0x90000000, 4, 1, "a"},
		{0xa0000000, 5, 1, "l"},
		{0xa8000000, 7, 1, "v"},
		{0xaa000000, 9, 1, "F"},
		{0xaa800000, 9, 1, "H"},
		{0xab000000, 10, 1, ")"},
		{0xab400000, 12, 12, "Directed by "},
		{0xab500000, 13, 4, "Good"},
		{0xab580000, 13, 3, "How"},
		{0xab600000, 11, 1, "q"},
		{0xab800000, 14, 7, "Cartoon"},
		{0xab840000, 14, 7, "Channel"},
		{0xab880000, 14, 5, "Final"},
		{0xab8c0000, 26, 4, "Plus"},
		{0xab8c0040, 26, 6, "Prayer"},
		{0xab8c0080, 26, 7, "Present"},
		{0xab8c00c0, 26, 12, "Presented by"},
		{0xab8c0100, 26, 4, "Quiz"},
		{0xab8c0140, 26, 8, "Regional"},
		{0xab8c0180, 26, 9, "Represent"},
		{0xab8c01c0, 26, 8, "Resource"},
		{0xab8c0200, 26, 6, "Review"},
		{0xab8c0240, 26, 7, "Richard"},
		{0xab8c0280, 26, 6, "School"},
		{0xab8c02c0, 26, 6, "Series"},
		{0xab8c0300, 26, 7, "Service"},
		{0xab8c0340, 26, 4, "Show"},
		{0xab8c0380, 26, 5, "Smith"},
		{0xab8c03c0, 26, 5, "South"},
		{0xab8c0400, 26, 5, "Sport"},
		{0xab8c0440, 26, 4, "Star"},
		{0xab8c0480, 26, 6, "Street"},
		{0xab8c04c0, 26, 2, "TV"},
		{0xab8c0500, 26, 8, "Teaching"},
		{0xab8c0540, 26, 3, "The"},
		{0xab8c0580, 26, 5, "Today"},
		{0xab8c05c0, 26, 7, "Tonight"},
		{0xab8c0600, 26, 7, "Weather"},
		{0xab8c0640, 26, 7, "Western"},
		{0xab8c0680, 26, 11, "Westminster"},
		{0xab8c06c0, 26, 7, "William"},
		{0xab8c0700, 26, 4, "With"},
		{0xab8c0740, 26, 5, "World"},
		{0xab8c0780, 26, 5, "about"},
		{0xab8c07c0, 26, 13, "action-packed"},
		{0xab8c0800, 26, 9, "adventure"},
		{0xab8c0840, 26, 9, "afternoon"},
		{0xab8c0880, 26, 5, "alert"},
		{0xab8c08c0, 26, 13, "all-star cast"},
		{0xab8c0900, 26, 3, "and"},
		{0xab8c0940, 26, 8, "anywhere"},
		{0xab8c0980, 26, 8, "audience"},
		{0xab8c09c0, 26, 5, "based"},
		{0xab8c0a00, 26, 4, "book"},
		{0xab8c0a40, 26, 8, "business"},
		{0xab8c0a80, 26, 3, "but"},
		{0xab8c0ac0, 26, 9, "celebrity"},
		{0xab8c0b00, 26, 6, "chance"},
		{0xab8c0b40, 26, 4, "chat"},
		{0xab8c0b80, 26, 5, "child"},
		{0xab8c0bc0, 26, 7, "classic"},
		{0xab8c0c00, 26, 8, "consumer"},
		{0xab8c0c40, 26, 11, "contestants"},
		{0xab8c0c80, 26, 9, "continues"},
		{0xab8c0cc0, 26, 13, "controversial"},
		{0xab8c0d00, 26, 6, "dealer"},
		{0xab8c0d40, 26, 7, "deliver"},
		{0xab8c0d80, 26, 7, "discuss"},
		{0xab8c0dc0, 26, 8, "document"},
		{0xab8c0e00, 26, 5, "drama"},
		{0xab8c0e40, 26, 7, "edition"},
		{0xab8c0e80, 26, 9, "education"},
		{0xab8c0ec0, 26, 6, "events"},
		{0xab8c0f00, 26, 5, "every"},
		{0xab8c0f40, 26, 9, "excellent"},
		{0xab8c0f80, 26, 4, "eyed"},
		{0xab8c0fc0, 26, 6, "family"},
		{0xab8c1000, 26, 6, "famous"},
		{0xab8c1040, 26, 6, "featur"},
		{0xab8c1080, 26, 4, "film"},
		{0xab8c10c0, 26, 8, "football"},
		{0xab8c1100, 26, 3, "for"},
		{0xab8c1140, 26, 4, "from"},
		{0xab8c1180, 26, 17, "general knowledge"},
		{0xab8c11c0, 26, 3, "get"},
		{0xab8c1200, 26, 5, "guest"},
		{0xab8c1240, 26, 6, "guests"},
		{0xab8c1280, 26, 3, "has"},
		{0xab8c12c0, 26, 4, "have"},
		{0xab8c1300, 26, 8, "headline"},
		{0xab8c1340, 26, 3, "her"},
		{0xab8c1380, 26, 3, "his"},
		{0xab8c13c0, 26, 15, "home and abroad"},
		{0xab8c1400, 26, 4, "host"},
		{0xab8c1440, 26, 3, "how"},
		{0xab8c1480, 26, 2, "in"},
		{0xab8c14c0, 26, 9, "including"},
		{0xab8c1500, 26, 13, "international"},
		{0xab8c1540, 26, 9, "interview"},
		{0xab8c1580, 26, 9, "introduce"},
		{0xab8c15c0, 26, 10, "investigat"},
		{0xab8c1600, 26, 7, "invites"},
		{0xab8c1640, 26, 5, "issue"},
		{0xab8c1680, 26, 9, "knowledge"},
		{0xab8c16c0, 26, 4, "life"},
		{0xab8c1700, 26, 4, "live"},
		{0xab8c1740, 26, 4, "look"},
		{0xab8c1780, 26, 8, "magazine"},
		{0xab8c17c0, 26, 6, "meets "},
		{0xab8c1800, 26, 7, "morning"},
		{0xab8c1840, 26, 16, "morning magazine"},
		{0xab8c1880, 26, 5, "music"},
		{0xab8c18c0, 26, 4, "near"},
		{0xab8c1900, 26, 7, "network"},
		{0xab8c1940, 26, 3, "new"},
		{0xab8c1980, 26, 10, "new series"},
		{0xab8c19c0, 26, 5, "night"},
		{0xab8c1a00, 26, 2, "of"},
		{0xab8c1a40, 26, 2, "on"},
		{0xab8c1a80, 26, 6, "onight"},
		{0xab8c1ac0, 26, 3, "out"},
		{0xab8c1b00, 26, 4, "over"},
		{0xab8c1b40, 26, 4, "part"},
		{0xab8c1b80, 26, 6, "people"},
		{0xab8c1bc0, 26, 5, "phone"},
		{0xab8c1c00, 26, 4, "poli"},
		{0xab8c1c40, 26, 6, "police"},
		{0xab8c1c80, 26, 19, "political chat show"},
		{0xab8c1cc0, 26, 7, "popular"},
		{0xab8c1d00, 26, 13, "presented by "},
		{0xab8c1d40, 26, 8, "programm"},
		{0xab8c1d80, 26, 4, "quiz"},
		{0xab8c1dc0, 26, 14, "reconstruction"},
		{0xab8c1e00, 26, 6, "report"},
		{0xab8c1e40, 26, 6, "review"},
		{0xab8c1e80, 26, 6, "school"},
		{0xab8c1ec0, 26, 6, "series"},
		{0xab8c1f00, 26, 6, "short "},
		{0xab8c1f40, 26, 4, "show"},
		{0xab8c1f80, 26, 4, "some"},
		{0xab8c1fc0, 26, 8, "starring"},
		{0xab8c2000, 26, 5, "stars"},
		{0xab8c2040, 26, 7, "stories"},
		{0xab8c2080, 26, 5, "story"},
		{0xab8c20c0, 26, 6, "studio"},
		{0xab8c2100, 26, 8, "surprise"},
		{0xab8c2140, 26, 6, "teller"},
		{0xab8c2180, 26, 4, "that"},
		{0xab8c21c0, 26, 3, "the"},
		{0xab8c2200, 26, 5, "their"},
		{0xab8c2240, 26, 4, "them"},
		{0xab8c2280, 26, 4, "they"},
		{0xab8c22c0, 26, 4, "this"},
		{0xab8c2300, 26, 7, "through"},
		{0xab8c2340, 26, 2, "to"},
		{0xab8c2380, 26, 3, "top"},
		{0xab8c23c0, 26, 5, "trans"},
		{0xab8c2400, 26, 5, "under"},
		{0xab8c2440, 26, 2, "up"},
		{0xab8c2480, 26, 4, "very"},
		{0xab8c24c0, 26, 5, "video"},
		{0xab8c2500, 26, 4, "view"},
		{0xab8c2540, 26, 7, "vintage"},
		{0xab8c2580, 26, 5, "visit"},
		{0xab8c25c0, 26, 3, "was"},
		{0xab8c2600, 26, 3, "way"},
		{0xab8c2640, 26, 4, "week"},
		{0xab8c2680, 26, 4, "well"},
		{0xab8c26c0, 26, 4, "what"},
		{0xab8c2700, 26, 4, "when"},
		{0xab8c2740, 26, 5, "which"},
		{0xab8c2780, 26, 5, "while"},
		{0xab8c27c0, 26, 3, "who"},
		{0xab8c2800, 26, 4, "will"},
		{0xab8c2840, 26, 3, "win"},
		{0xab8c2880, 26, 4, "with"},
		{0xab8c28c0, 26, 5, "words"},
		{0xab8c2900, 26, 5, "world"},
		{0xab8c2940, 26, 7, "written"},
		{0xab8c2980, 27, 1, " "},
		{0xab8c29a0, 27, 1, " "},
		{0xab8c29c0, 27, 1, " "},
		{0xab8c29e0, 27, 1, " "},
		{0xab8c2a00, 27, 1, " "},
		{0xab8c2a20, 27, 1, " "},
		{0xab8c2a40, 27, 1, " "},
		{0xab8c2a60, 27, 1, " "},
		{0xab8c2a80, 27, 1, " "},
		{0xab8c2aa0, 27, 1, " "},
		{0xab8c2ac0, 27, 1, " "},
		{0xab8c2ae0, 27, 1, " "},
		{0xab8c2b00, 27, 1, " "},
		{0xab8c2b20, 27, 1, " "},
		{0xab8c2b40, 27, 1, " "},
		{0xab8c2b60, 27, 1, " "},
		{0xab8c2b80, 27, 1, " "},
		{0xab8c2ba0, 27, 1, " "},
		{0xab8c2bc0, 27, 1, " "},
		{0xab8c2be0, 27, 1, " "},
		{0xab8c2c00, 27, 1, " "},
		{0xab8c2c20, 27, 1, " "},
		{0xab8c2c40, 27, 1, " "},
		{0xab8c2c60, 27, 1, " "},
		{0xab8c2c80, 27, 1, " "},
		{0xab8c2ca0, 27, 1, " "},
		{0xab8c2cc0, 27, 1, " "},
		{0xab8c2ce0, 27, 1, " "},
		{0xab8c2d00, 27, 1, " "},
		{0xab8c2d20, 27, 1, " "},
		{0xab8c2d40, 27, 1, "\""},
		{0xab8c2d60, 27, 1, "#"},
		{0xab8c2d80, 27, 1, "%"},
		{0xab8c2da0, 27, 1, "+"},
		{0xab8c2dc0, 27, 1, "="},
		{0xab8c2de0, 27, 1, "\\"},
		{0xab8c2e00, 27, 1, "^"},
		{0xab8c2e20, 27, 1, "_"},
		{0xab8c2e40, 27, 1, "{"},
		{0xab8c2e60, 27, 1, "|"},
		{0xab8c2e80, 27, 1, "}"},
		{0xab8c2ea0, 27, 1, "~"},
		{0xab8c2ec0, 27, 1, " "},
		{0xab8c2ee0, 27, 1, " "},
		{0xab8c2f00, 27, 1, " "},
		{0xab8c2f20, 27, 1, " "},
		{0xab8c2f40, 27, 1, " "},
		{0xab8c2f60, 27, 1, " "},
		{0xab8c2f80, 27, 1, " "},
		{0xab8c2fa0, 27, 1, " "},
		{0xab8c2fc0, 27, 1, " "},
		{0xab8c2fe0, 27, 1, " "},
		{0xab8c3000, 27, 1, " "},
		{0xab8c3020, 27, 1, " "},
		{0xab8c3040, 27, 1, " "},
		{0xab8c3060, 27, 1, " "},
		{0xab8c3080, 27, 1, " "},
		{0xab8c30a0, 27, 1, " "},
		{0xab8c30c0, 27, 1, " "},
		{0xab8c30e0, 27, 1, " "},
		{0xab8c3100, 27, 1, " "},
		{0xab8c3120, 27, 1, " "},
		{0xab8c3140, 27, 1, " "},
		{0xab8c3160, 27, 1, " "},
		{0xab8c3180, 27, 1, " "},
		{0xab8c31a0, 27, 1, " "},
		{0xab8c31c0, 27, 1, " "},
		{0xab8c31e0, 27, 1, " "},
		{0xab8c3200, 27, 1, " "},
		{0xab8c3220, 27, 1, " "},
		{0xab8c3240, 27, 1, " "},
		{0xab8c3260, 27, 1, " "},
		{0xab8c3280, 27, 1, " "},
		{0xab8c32a0, 27, 1, " "},
		{0xab8c32c0, 27, 2, " "},
		{0xab8c32e0, 27, 2, "¡"},
		{0xab8c3300, 27, 2, "¢"},
		{0xab8c3320, 27, 2, "£"},
		{0xab8c3340, 27, 2, "¤"},
		{0xab8c3360, 27, 2, "¥"},
		{0xab8c3380, 27, 2, "¦"},
		{0xab8c33a0, 27, 2, "§"},
		{0xab8c33c0, 27, 2, "¨"},
		{0xab8c33e0, 27, 2, "©"},
		{0xab8c3400, 27, 2, "ª"},
		{0xab8c3420, 27, 2, "«"},
		{0xab8c3440, 27, 2, "¬"},
		{0xab8c3460, 27, 2, "­"},
		{0xab8c3480, 27, 2, "®"},
		{0xab8c34a0, 27, 2, "¯"},
		{0xab8c34c0, 27, 2, "°"},
		{0xab8c34e0, 27, 2, "±"},
		{0xab8c3500, 27, 2, "²"},
		{0xab8c3520, 27, 2, "³"},
		{0xab8c3540, 27, 2, "´"},
		{0xab8c3560, 27, 2, "µ"},
		{0xab8c3580, 27, 2, "¶"},
		{0xab8c35a0, 27, 2, "·"},
		{0xab8c35c0, 27, 2, "¸"},
		{0xab8c35e0, 27, 2, "¹"},
		{0xab8c3600, 27, 2, "º"},
		{0xab8c3620, 27, 2, "»"},
		{0xab8c3640, 27, 2, "¼"},
		{0xab8c3660, 27, 2, "½"},
		{0xab8c3680, 27, 2, "¾"},
		{0xab8c36a0, 27, 2, "¿"},
		{0xab8c36c0, 27, 2, "À"},
		{0xab8c36e0, 27, 2, "Á"},
		{0xab8c3700, 27, 2, "Â"},
		{0xab8c3720, 27, 2, "Ã"},
		{0xab8c3740, 27, 2, "Ä"},
		{0xab8c3760, 27, 2, "Å"},
		{0xab8c3780, 27, 2, "Æ"},
		{0xab8c37a0, 27, 2, "Ç"},
		{0xab8c37c0, 27, 2, "È"},
		{0xab8c37e0, 27, 2, "É"},
		{0xab8c3800, 27, 2, "Ê"},
		{0xab8c3820, 27, 2, "Ë"},
		{0xab8c3840, 27, 2, "Ì"},
		{0xab8c3860, 27, 2, "Í"},
		{0xab8c3880, 27, 2, "Î"},
		{0xab8c38a0, 27, 2, "Ï"},
		{0xab8c38c0, 27, 2, "Ð"},
		{0xab8c38e0, 27, 2, "Ñ"},
		{0xab8c3900, 27, 2, "Ò"},
		{0xab8c3920, 27, 2, "Ó"},
		{0xab8c3940, 27, 2, "Ô"},
		{0xab8c3960, 27, 2, "Õ"},
		{0xab8c3980, 27, 2, "Ö"},
		{0xab8c39a0, 27, 2, "×"},
		{0xab8c39c0, 27, 2, "Ø"},
		{0xab8c39e0, 27, 2, "Ù"},
		{0xab8c3a00, 27, 2, "Ú"},
		{0xab8c3a20, 27, 2, "Û"},
		{0xab8c3a40, 27, 2, "Ü"},
		{0xab8c3a60, 27, 2, "Ý"},
		{0xab8c3a80, 27, 2, "Þ"},
		{0xab8c3aa0, 27, 2, "ß"},
		{0xab8c3ac0, 27, 2, "à"},
		{0xab8c3ae0, 27, 2, "á"},
		{0xab8c3b00, 27, 2, "â"},
		{0xab8c3b20, 27, 2, "ã"},
		{0xab8c3b40, 27, 2, "ä"},
		{0xab8c3b60, 27, 2, "å"},
		{0xab8c3b80, 27, 2, "æ"},
		{0xab8c3ba0, 27, 2, "ç"},
		{0xab8c3bc0, 27, 2, "è"},
		{0xab8c3be0, 27, 2, "é"},
		{0xab8c3c00, 27, 2, "ê"},
		{0xab8c3c20, 27, 2, "ë"},
		{0xab8c3c40, 27, 2, "ì"},
		{0xab8c3c60, 27, 2, "í"},
		{0xab8c3c80, 27, 2, "î"},
		{0xab8c3ca0, 27, 2, "ï"},
		{0xab8c3cc0, 27, 2, "ð"},
		{0xab8c3ce0, 27, 2, "ñ"},
		{0xab8c3d00, 27, 2, "ò"},
		{0xab8c3d20, 27, 2, "ó"},
		{0xab8c3d40, 27, 2, "ô"},
		{0xab8c3d60, 27, 2, "õ"},
		{0xab8c3d80, 27, 2, "ö"},
		{0xab8c3da0, 27, 2, "÷"},
		{0xab8c3dc0, 27, 2, "ø"},
		{0xab8c3de0, 27, 2, "ù"},
		{0xab8c3e00, 27, 2, "ú"},
		{0xab8c3e20, 27, 2, "û"},
		{0xab8c3e40, 27, 2, "ü"},
		{0xab8c3e60, 27, 2, "ý"},
		{0xab8c3e80, 27, 2, "þ"},
		{0xab8c3ea0, 27, 2, "ÿ"},
		{0xab8c3ec0, 27, 7, "Minutes"},
		{0xab8c3ee0, 27, 4, "More"},
		{0xab8c3f00, 27, 7, "Morning"},
		{0xab8c3f20, 27, 6, "Murder"},
		{0xab8c3f40, 27, 6, "Nation"},
		{0xab8c3f60, 27, 10, "Neighbours"},
		{0xab8c3f80, 27, 3, "New"},
		{0xab8c3fa0, 27, 14, "News & Weather"},
		{0xab8c3fc0, 27, 16, "News And Weather"},
		{0xab8c3fe0, 27, 4, "Paul"},
		{0xab8c4000, 18, 1, "@"},
		{0xab8c8000, 17, 1, "["},
		{0xab8d0000, 16, 1, "$"},
		{0xab8e0000, 15, 6, "Action"},
		{0xab900000, 12, 8, "Meridian"},
		{0xaba00000, 11, 1, "U"},
		{0xabc00000, 11, 1, "Y"},
		{0xabe00000, 13, 7, "Britain"},
		{0xabe80000, 13, 4, "Call"},
		{0xabf00000, 13, 6, "George"},
		{0xabf80000, 14, 11, "(Including "},
		{0xabfc0000, 14, 3, "BBC"},
		{0xac000000, 6, 1, "m"},
		{0xb0000000, 7, 1, ","},
		{0xb2000000, 8, 1, "W"},
		{0xb3000000, 10, 1, "z"},
		{0xb3400000, 11, 3, "you"},
		{0xb3600000, 14, 3, "Big"},
		{0xb3640000, 14, 5, "Extra"},
		{0xb3680000, 13, 7, "Michael"},
		{0xb3700000, 13, 4, "Blue"},
		{0xb3780000, 14, 4, "Look"},
		{0xb37c0000, 14, 10, "Adventures"},
		{0xb3800000, 9, 1, "1"},
		{0xb4000000, 6, 1, "u"},
		{0xb8000000, 5, 1, "h"},
		{0xc0000000, 3, 1, " "},
		{0xe0000000, 7, 1, "b"},
		{0xe2000000, 8, 1, "A"},
		{0xe3000000, 10, 10, "(Teletext)"},
		{0xe3400000, 11, 1, "j"},
		{0xe3600000, 14, 4, "Baby"},
		{0xe3640000, 14, 5, "Clock"},
		{0xe3680000, 15, 9, "Financial"},
		{0xe36a0000, 15, 9, "Hollywood"},
		{0xe36c0000, 15, 5, "Lunch"},
		{0xe36e0000, 17, 1, "]"},
		{0xe36e8000, 17, 1, " "},
		{0xe36f0000, 16, 1, "X"},
		{0xe3700000, 12, 3, "For"},
		{0xe3800000, 9, 1, "D"},
		{0xe4000000, 6, 1, "c"},
		{0xe8000000, 10, 1, "E"},
		{0xe8400000, 10, 1, "I"},
		{0xe8800000, 13, 4, "Live"},
		{0xe8880000, 14, 12, "(New Series)"},
		{0xe88c0000, 14, 6, "Comedy"},
		{0xe8900000, 14, 5, "Great"},
		{0xe8940000, 14, 4, "Hour"},
		{0xe8980000, 14, 13, "International"},
		{0xe89c0000, 14, 4, "Last"},
		{0xe8a00000, 11, 1, "("},
		{0xe8c00000, 11, 1, ":"},
		{0xe8e00000, 13, 7, "British"},
		{0xe8e80000, 13, 6, "(Part "},
		{0xe8f00000, 14, 6, "London"},
		{0xe8f40000, 14, 6, "French"},
		{0xe8f80000, 13, 1, "<"},
		{0xe9000000, 9, 1, "0"},
		{0xe9800000, 10, 8, "(Repeat)"},
		{0xe9c00000, 10, 1, "K"},
		{0xea000000, 10, 1, "5"},
		{0xea400000, 11, 1, "`"},
		{0xea600000, 13, 1, ">"},
		{0xea680000, 14, 4, "Hear"},
		{0xea6c0000, 15, 7, "Country"},
		{0xea6e0000, 15, 8, "Animated"},
		{0xea700000, 12, 1, "?"},
		{0xea800000, 13, 1, "Z"},
		{0xea880000, 14, 4, "Away"},
		{0xea8c0000, 14, 4, "Best"},
		{0xea900000, 14, 3, "ITN"},
		{0xea940000, 15, 4, "Cook"},
		{0xea960000, 15, 4, "Golf"},
		{0xea980000, 15, 9, "Hampshire"},
		{0xea9a0000, 15, 9, "Important"},
		{0xea9c0000, 14, 8, "Children"},
		{0xeaa00000, 11, 1, "V"},
		{0xeac00000, 10, 1, "x"},
		{0xeb000000, 9, 1, "R"},
		{0xeb800000, 9, 1, "N"},
		{0xec000000, 7, 1, "."},
		{0xee000000, 7, 1, " "},
		{0xf0000000, 4, 1, "e"}
};

static huff_data_t sky_it_data{
		{0x00000000, 5, 1, "s"},
		{0x08000000, 7, 1, "'"},
		{0x0a000000, 8, 1, "A"},
		{0x0b000000, 11, 1, "Q"},
		{0x0b200000, 12, 8, "business"},
		{0x0b300000, 12, 4, "Paul"},
		{0x0b400000, 12, 4, "aver"},
		{0x0b500000, 13, 1, "("},
		{0x0b580000, 18, 1, " "},
		{0x0b584000, 18, 1, " "},
		{0x0b588000, 19, 1, "^"},
		{0x0b58a000, 19, 1, " "},
		{0x0b58c000, 19, 1, "�"},
		{0x0b58e000, 20, 1, " "},
		{0x0b58f000, 28, 1, "�"},
		{0x0b58f010, 28, 1, "�"},
		{0x0b58f020, 28, 1, "�"},
		{0x0b58f030, 28, 1, "�"},
		{0x0b58f040, 28, 1, "�"},
		{0x0b58f050, 28, 1, "�"},
		{0x0b58f060, 28, 1, "�"},
		{0x0b58f070, 28, 1, "�"},
		{0x0b58f080, 28, 1, "�"},
		{0x0b58f090, 28, 1, "�"},
		{0x0b58f0a0, 28, 1, "�"},
		{0x0b58f0b0, 28, 1, "�"},
		{0x0b58f0c0, 28, 1, "�"},
		{0x0b58f0d0, 28, 1, "�"},
		{0x0b58f0e0, 28, 1, "�"},
		{0x0b58f0f0, 28, 1, "�"},
		{0x0b58f100, 28, 1, "�"},
		{0x0b58f110, 28, 1, "�"},
		{0x0b58f120, 28, 1, "�"},
		{0x0b58f130, 28, 1, "�"},
		{0x0b58f140, 28, 1, "�"},
		{0x0b58f150, 28, 1, "�"},
		{0x0b58f160, 28, 1, "�"},
		{0x0b58f170, 28, 1, "�"},
		{0x0b58f180, 28, 1, "�"},
		{0x0b58f190, 28, 1, "�"},
		{0x0b58f1a0, 28, 1, "�"},
		{0x0b58f1b0, 28, 1, "�"},
		{0x0b58f1c0, 28, 1, "�"},
		{0x0b58f1d0, 28, 1, "�"},
		{0x0b58f1e0, 28, 1, "�"},
		{0x0b58f1f0, 28, 1, "�"},
		{0x0b58f200, 28, 1, "�"},
		{0x0b58f210, 28, 1, "�"},
		{0x0b58f220, 28, 1, "�"},
		{0x0b58f230, 28, 1, "�"},
		{0x0b58f240, 28, 1, "�"},
		{0x0b58f250, 28, 1, "�"},
		{0x0b58f260, 28, 1, "�"},
		{0x0b58f270, 28, 1, "�"},
		{0x0b58f280, 28, 1, "�"},
		{0x0b58f290, 28, 1, "�"},
		{0x0b58f2a0, 28, 1, "�"},
		{0x0b58f2b0, 28, 1, "�"},
		{0x0b58f2c0, 28, 1, "�"},
		{0x0b58f2d0, 28, 1, "�"},
		{0x0b58f2e0, 28, 1, "�"},
		{0x0b58f2f0, 28, 1, "�"},
		{0x0b58f300, 28, 1, "�"},
		{0x0b58f310, 28, 1, "�"},
		{0x0b58f320, 28, 1, "�"},
		{0x0b58f330, 28, 1, "�"},
		{0x0b58f340, 28, 1, "�"},
		{0x0b58f350, 28, 1, "�"},
		{0x0b58f360, 28, 1, "�"},
		{0x0b58f370, 28, 1, "�"},
		{0x0b58f380, 28, 1, "�"},
		{0x0b58f390, 28, 1, "�"},
		{0x0b58f3a0, 28, 1, "�"},
		{0x0b58f3b0, 28, 1, "�"},
		{0x0b58f3c0, 28, 1, "�"},
		{0x0b58f3d0, 28, 1, "�"},
		{0x0b58f3e0, 28, 1, "�"},
		{0x0b58f3f0, 28, 1, "�"},
		{0x0b58f400, 28, 1, "�"},
		{0x0b58f410, 28, 1, "�"},
		{0x0b58f420, 28, 1, "�"},
		{0x0b58f430, 28, 1, "�"},
		{0x0b58f440, 28, 1, "�"},
		{0x0b58f450, 28, 1, "�"},
		{0x0b58f460, 28, 1, "�"},
		{0x0b58f470, 28, 1, "�"},
		{0x0b58f480, 28, 1, "�"},
		{0x0b58f490, 28, 1, "�"},
		{0x0b58f4a0, 28, 1, "�"},
		{0x0b58f4b0, 28, 1, "�"},
		{0x0b58f4c0, 28, 1, "�"},
		{0x0b58f4d0, 28, 1, "�"},
		{0x0b58f4e0, 28, 1, "�"},
		{0x0b58f4f0, 28, 1, "�"},
		{0x0b58f500, 28, 1, "�"},
		{0x0b58f510, 28, 22, "decidG266  :  dedicato"},
		{0x0b58f520, 28, 7, "eventiG"},
		{0x0b58f550, 29, 1, " "},
		{0x0b58f558, 29, 1, " "},
		{0x0b58f560, 29, 1, " "},
		{0x0b58f568, 29, 1, " "},
		{0x0b58f570, 29, 1, " "},
		{0x0b58f578, 29, 1, " "},
		{0x0b58f580, 29, 1, " "},
		{0x0b58f588, 29, 1, " "},
		{0x0b58f590, 29, 1, " "},
		{0x0b58f598, 29, 1, " "},
		{0x0b58f5a0, 29, 1, " "},
		{0x0b58f5a8, 29, 1, " "},
		{0x0b58f5b0, 29, 1, " "},
		{0x0b58f5b8, 29, 1, " "},
		{0x0b58f5c0, 29, 1, " "},
		{0x0b58f5c8, 29, 1, " "},
		{0x0b58f5d0, 29, 1, " "},
		{0x0b58f5d8, 29, 1, " "},
		{0x0b58f5e0, 29, 1, " "},
		{0x0b58f5e8, 29, 1, " "},
		{0x0b58f5f0, 29, 1, " "},
		{0x0b58f5f8, 29, 1, " "},
		{0x0b58f600, 29, 1, " "},
		{0x0b58f608, 29, 1, " "},
		{0x0b58f610, 29, 1, " "},
		{0x0b58f618, 29, 1, " "},
		{0x0b58f620, 29, 1, " "},
		{0x0b58f628, 29, 1, " "},
		{0x0b58f630, 29, 1, " "},
		{0x0b58f638, 29, 1, " "},
		{0x0b58f640, 29, 1, " "},
		{0x0b58f648, 29, 1, "#"},
		{0x0b58f650, 29, 1, "$"},
		{0x0b58f658, 29, 1, "%"},
		{0x0b58f660, 29, 1, "*"},
		{0x0b58f668, 29, 1, "<"},
		{0x0b58f670, 29, 1, "="},
		{0x0b58f678, 29, 1, ">"},
		{0x0b58f680, 29, 1, "["},
		{0x0b58f688, 29, 1, "\\"},
		{0x0b58f690, 29, 1, "]"},
		{0x0b58f698, 29, 1, "_"},
		{0x0b58f6a0, 29, 1, "{"},
		{0x0b58f6a8, 29, 1, "|"},
		{0x0b58f6b0, 29, 1, "}"},
		{0x0b58f6b8, 29, 1, "~"},
		{0x0b58f6c0, 29, 1, " "},
		{0x0b58f6c8, 29, 1, " "},
		{0x0b58f6d0, 29, 1, " "},
		{0x0b58f6d8, 29, 1, " "},
		{0x0b58f6e0, 29, 1, " "},
		{0x0b58f6e8, 29, 1, " "},
		{0x0b58f6f0, 29, 1, " "},
		{0x0b58f6f8, 29, 1, " "},
		{0x0b58f700, 29, 1, " "},
		{0x0b58f708, 29, 1, " "},
		{0x0b58f710, 29, 1, " "},
		{0x0b58f718, 29, 1, " "},
		{0x0b58f720, 29, 1, " "},
		{0x0b58f728, 29, 1, " "},
		{0x0b58f730, 29, 1, " "},
		{0x0b58f738, 29, 1, " "},
		{0x0b58f740, 29, 1, " "},
		{0x0b58f748, 29, 1, " "},
		{0x0b58f750, 29, 1, " "},
		{0x0b58f758, 29, 1, " "},
		{0x0b58f760, 29, 1, " "},
		{0x0b58f768, 29, 1, " "},
		{0x0b58f770, 29, 1, " "},
		{0x0b58f778, 29, 1, " "},
		{0x0b58f780, 29, 1, " "},
		{0x0b58f788, 29, 1, " "},
		{0x0b58f790, 29, 1, " "},
		{0x0b58f798, 29, 1, " "},
		{0x0b58f7a0, 29, 1, "�"},
		{0x0b58f7a8, 29, 1, "�"},
		{0x0b58f7b0, 29, 1, "�"},
		{0x0b58f7b8, 29, 1, "�"},
		{0x0b58f7c0, 29, 1, "�"},
		{0x0b58f7c8, 29, 1, "�"},
		{0x0b58f7d0, 29, 1, "�"},
		{0x0b58f7d8, 29, 1, "�"},
		{0x0b58f7e0, 29, 1, "�"},
		{0x0b58f7e8, 29, 1, "�"},
		{0x0b58f7f0, 29, 1, "�"},
		{0x0b58f7f8, 29, 1, "�"},
		{0x0b58f800, 21, 1, "+"},
		{0x0b590000, 16, 1, "�"},
		{0x0b5a0000, 15, 1, "�"},
		{0x0b5c0000, 14, 1, "`"},
		{0x0b600000, 11, 5, "Fares"},
		{0x0b800000, 11, 5, "Fiumi"},
		{0x0ba00000, 11, 15, "L'appassionante"},
		{0x0bc00000, 11, 5, "Nadia"},
		{0x0be00000, 11, 6, "cassel"},
		{0x0c000000, 6, 1, "g"},
		{0x10000000, 4, 1, "i"},
		{0x20000000, 4, 1, "o"},
		{0x30000000, 11, 8, "distanza"},
		{0x30200000, 11, 7, "porpora"},
		{0x30400000, 11, 8, "trecento"},
		{0x30600000, 12, 7, "Servizi"},
		{0x30700000, 12, 5, "nuovi"},
		{0x30800000, 11, 8, "affidare"},
		{0x30a00000, 11, 9, "Kassovitz"},
		{0x30c00000, 11, 7, "Mathieu"},
		{0x30e00000, 11, 4, "Reno"},
		{0x31000000, 11, 9, "singolari"},
		{0x31200000, 11, 7, "Vincent"},
		{0x31400000, 11, 6, "vedono"},
		{0x31600000, 12, 5, "World"},
		{0x31700000, 12, 10, "curiosita'"},
		{0x31800000, 10, 3, "dei"},
		{0x31c00000, 11, 10, "poliziotti"},
		{0x31e00000, 11, 10, "chilometri"},
		{0x32000000, 8, 2, "da"},
		{0x33000000, 9, 1, "w"},
		{0x33800000, 10, 2, "Il"},
		{0x33c00000, 11, 3, "non"},
		{0x33e00000, 12, 3, "cui"},
		{0x33f00000, 12, 5, "fatti"},
		{0x34000000, 7, 1, "z"},
		{0x36000000, 7, 1, "f"},
		{0x38000000, 6, 1, "u"},
		{0x3c000000, 7, 2, "al"},
		{0x3e000000, 9, 4, "2001"},
		{0x3e800000, 9, 1, "L"},
		{0x3f000000, 8, 3, "per"},
		{0x40000000, 2, 1, " "},
		{0x80000000, 6, 2, "di"},
		{0x84000000, 10, 15, "Intrattenimento"},
		{0x84400000, 11, 6, "stesso"},
		{0x84600000, 11, 4, "film"},
		{0x84800000, 11, 5, "nello"},
		{0x84a00000, 11, 3, "sua"},
		{0x84c00000, 12, 4, "Fine"},
		{0x84d00000, 12, 7, "vengono"},
		{0x84e00000, 11, 3, "suo"},
		{0x85000000, 9, 1, "D"},
		{0x85800000, 9, 1, "N"},
		{0x86000000, 12, 5, "verso"},
		{0x86100000, 12, 8, "Commedia"},
		{0x86200000, 11, 7, "Francia"},
		{0x86400000, 11, 4, "Club"},
		{0x86600000, 11, 3, "XXX"},
		{0x86800000, 9, 1, "M"},
		{0x87000000, 12, 7, "servizi"},
		{0x87100000, 12, 7, "cultura"},
		{0x87200000, 12, 8, "Magazine"},
		{0x87300000, 12, 4, "ogni"},
		{0x87400000, 11, 4, "casi"},
		{0x87600000, 12, 8, "maggiori"},
		{0x87700000, 12, 14, "internazionale"},
		{0x87800000, 12, 4, "(dur"},
		{0x87900000, 12, 6, "Adulti"},
		{0x87a00000, 11, 1, ";"},
		{0x87c00000, 10, 1, "H"},
		{0x88000000, 6, 1, "m"},
		{0x8c000000, 6, 1, "p"},
		{0x90000000, 9, 1, "1"},
		{0x90800000, 12, 4, "Snow"},
		{0x90900000, 12, 10, "interviste"},
		{0x90a00000, 12, 5, "sulle"},
		{0x90b00000, 12, 7, "diretta"},
		{0x90c00000, 10, 1, "V"},
		{0x91000000, 10, 6, "Orario"},
		{0x91400000, 10, 8, "prossimo"},
		{0x91800000, 9, 1, ":"},
		{0x92000000, 8, 3, "che"},
		{0x93000000, 8, 1, "0"},
		{0x94000000, 8, 1, "C"},
		{0x95000000, 10, 6, "inizio"},
		{0x95400000, 11, 4, "anni"},
		{0x95600000, 11, 4, "Jean"},
		{0x95800000, 10, 2, "La"},
		{0x95c00000, 10, 2, "Da"},
		{0x96000000, 9, 1, "G"},
		{0x96800000, 12, 8, "successo"},
		{0x96900000, 12, 5, "dalla"},
		{0x96a00000, 11, 4, "news"},
		{0x96c00000, 10, 2, "In"},
		{0x97000000, 9, 3, "gli"},
		{0x97800000, 10, 2, "ai"},
		{0x97c00000, 11, 5, "Dalle"},
		{0x97e00000, 11, 7, "Bateman"},
		{0x98000000, 6, 1, "."},
		{0x9c000000, 7, 1, " "},
		{0x9e000000, 11, 6, "Harron"},
		{0x9e200000, 11, 9, "ammazzare"},
		{0x9e400000, 11, 6, "broker"},
		{0x9e600000, 11, 9, "torturare"},
		{0x9e800000, 10, 4, "piu'"},
		{0x9ec00000, 11, 4, "Mary"},
		{0x9ee00000, 11, 6, "Psycho"},
		{0x9f000000, 8, 2, "ma"},
		{0xa0000000, 4, 1, "e"},
		{0xb0000000, 7, 1, "d"},
		{0xb2000000, 11, 11, "malcapitati"},
		{0xb2200000, 12, 3, "Una"},
		{0xb2300000, 12, 4, "casa"},
		{0xb2400000, 11, 9, "Manhattan"},
		{0xb2600000, 11, 6, "divide"},
		{0xb2800000, 10, 5, "della"},
		{0xb2c00000, 11, 7, "Patrick"},
		{0xb2e00000, 12, 10, "Notiziario"},
		{0xb2f00000, 12, 1, "6"},
		{0xb3000000, 8, 1, "-"},
		{0xb4000000, 8, 1, "S"},
		{0xb5000000, 11, 5, "bello"},
		{0xb5200000, 11, 5, "feste"},
		{0xb5400000, 10, 2, "of"},
		{0xb5800000, 11, 8, "American"},
		{0xb5a00000, 11, 3, "Con"},
		{0xb5c00000, 11, 5, "ricco"},
		{0xb5e00000, 11, 6, "Street"},
		{0xb6000000, 8, 1, "h"},
		{0xb7000000, 9, 3, "una"},
		{0xb7800000, 9, 2, "ed"},
		{0xb8000000, 5, 1, "n"},
		{0xc0000000, 6, 1, ","},
		{0xc4000000, 12, 5, "degli"},
		{0xc4100000, 12, 10, "Attualita'"},
		{0xc4200000, 11, 4, "Wall"},
		{0xc4400000, 12, 6, "contro"},
		{0xc4500000, 12, 6, "citta'"},
		{0xc4600000, 11, 4, "sono"},
		{0xc4800000, 12, 6, "Giallo"},
		{0xc4900000, 12, 12, "informazione"},
		{0xc4a00000, 11, 1, "4"},
		{0xc4c00000, 11, 3, "Per"},
		{0xc4e00000, 11, 2, "Le"},
		{0xc5000000, 11, 4, "loro"},
		{0xc5200000, 12, 7, "viaggio"},
		{0xc5300000, 13, 1, "Z"},
		{0xc5380000, 13, 11, "settimanale"},
		{0xc5400000, 10, 2, "ha"},
		{0xc5800000, 10, 1, "J"},
		{0xc5c00000, 12, 4, "come"},
		{0xc5d00000, 13, 6, "TRAMA:"},
		{0xc5d80000, 13, 6, "Bechis"},
		{0xc5e00000, 11, 4, "vita"},
		{0xc6000000, 9, 1, "k"},
		{0xc6800000, 9, 2, "e'"},
		{0xc7000000, 11, 5, "delle"},
		{0xc7200000, 12, 3, "Teo"},
		{0xc7300000, 13, 10, "Echeverria"},
		{0xc7380000, 13, 10, "Emmanuelle"},
		{0xc7400000, 13, 8, "Giovanni"},
		{0xc7480000, 13, 6, "Javier"},
		{0xc7500000, 13, 10, "Mammuccari"},
		{0xc7580000, 13, 7, "Seigner"},
		{0xc7600000, 13, 7, "Streghe"},
		{0xc7680000, 13, 8, "Veronesi"},
		{0xc7700000, 13, 6, "divisi"},
		{0xc7780000, 13, 9, "levatrice"},
		{0xc7800000, 13, 10, "maschietto"},
		{0xc7880000, 13, 6, "regime"},
		{0xc7900000, 13, 12, "trasformarlo"},
		{0xc7980000, 13, 1, "Y"},
		{0xc7a00000, 13, 5, "libro"},
		{0xc7a80000, 13, 4, "Rosa"},
		{0xc7b00000, 13, 7, "Sorvino"},
		{0xc7b80000, 13, 10, "produttore"},
		{0xc7c00000, 10, 3, "due"},
		{0xc8000000, 9, 5, "Regia"},
		{0xc8800000, 13, 7, "streghe"},
		{0xc8880000, 13, 9, "Sandrelli"},
		{0xc8900000, 13, 5, "brani"},
		{0xc8980000, 13, 6, "ultimi"},
		{0xc8a00000, 12, 4, "solo"},
		{0xc8b00000, 12, 4, "Momo"},
		{0xc8c00000, 13, 5, "Figli"},
		{0xc8c80000, 13, 10, "anfiteatro"},
		{0xc8d00000, 13, 9, "diabolici"},
		{0xc8d80000, 13, 6, "grigi'"},
		{0xc8e00000, 13, 9, "imbattere"},
		{0xc8e80000, 13, 4, "nord"},
		{0xc8f00000, 13, 6, "timida"},
		{0xc8f80000, 13, 6, "D'Alo'"},
		{0xc9000000, 8, 2, "un"},
		{0xca000000, 9, 1, "R"},
		{0xca800000, 13, 7, "incinta"},
		{0xca880000, 13, 6, "destra"},
		{0xca900000, 12, 4, "tale"},
		{0xcaa00000, 13, 7, "ricordi"},
		{0xcaa80000, 13, 5, "Peter"},
		{0xcab00000, 12, 9, "Argentina"},
		{0xcac00000, 10, 1, "O"},
		{0xcb000000, 8, 2, "il"},
		{0xcc000000, 8, 2, "la"},
		{0xcd000000, 9, 2, "as"},
		{0xcd800000, 13, 4, "dice"},
		{0xcd880000, 13, 9, "compagnia"},
		{0xcd900000, 12, 3, "sui"},
		{0xcda00000, 12, 5, "tutto"},
		{0xcdb00000, 13, 1, "?"},
		{0xcdb80000, 13, 9, "scrittore"},
		{0xcdc00000, 10, 4, "Alle"},
		{0xce000000, 7, 1, "v"},
		{0xd0000000, 9, 1, "P"},
		{0xd0800000, 10, 3, "ore"},
		{0xd0c00000, 11, 6, "lavoro"},
		{0xd0e00000, 13, 4, "suoi"},
		{0xd0e80000, 13, 6, "Carlos"},
		{0xd0f00000, 13, 6, "scrive"},
		{0xd0f80000, 13, 7, "trovato"},
		{0xd1000000, 12, 1, "j"},
		{0xd1100000, 13, 4, "Enzo"},
		{0xd1180000, 13, 7, "bambina"},
		{0xd1200000, 13, 3, "ITV"},
		{0xd1280000, 13, 3, "dai"},
		{0xd1300000, 12, 1, "U"},
		{0xd1400000, 10, 3, "USA"},
		{0xd1800000, 10, 1, "W"},
		{0xd1c00000, 11, 1, "8"},
		{0xd1e00000, 12, 1, "7"},
		{0xd1f00000, 13, 7, "Durante"},
		{0xd1f80000, 13, 9, "conquista"},
		{0xd2000000, 8, 3, "con"},
		{0xd3000000, 9, 3, "tra"},
		{0xd3800000, 10, 2, "Ma"},
		{0xd3c00000, 13, 10, "Campionato"},
		{0xd3c80000, 13, 5, "dolce"},
		{0xd3d00000, 13, 7, "piccola"},
		{0xd3d80000, 13, 7, "Michael"},
		{0xd3e00000, 12, 4, "News"},
		{0xd3f00000, 12, 1, ")"},
		{0xd4000000, 7, 2, "in"},
		{0xd6000000, 9, 1, "T"},
		{0xd6800000, 10, 4, "Film"},
		{0xd6c00000, 13, 7, "proprio"},
		{0xd6c80000, 13, 10, "attraverso"},
		{0xd6d00000, 13, 8, "Stefania"},
		{0xd6d80000, 13, 5, "parte"},
		{0xd6e00000, 11, 4, "alla"},
		{0xd7000000, 8, 2, "le"},
		{0xd8000000, 5, 1, "r"},
		{0xe0000000, 9, 1, "E"},
		{0xe0800000, 10, 2, "su"},
		{0xe0c00000, 11, 7, "giovane"},
		{0xe0e00000, 13, 7, "salvare"},
		{0xe0e80000, 13, 1, "!"},
		{0xe0f00000, 12, 6, "musica"},
		{0xe1000000, 8, 1, "b"},
		{0xe2000000, 13, 6, "essere"},
		{0xe2080000, 13, 6, "rovine"},
		{0xe2100000, 16, 1, "@"},
		{0xe2110000, 17, 1, " "},
		{0xe2118000, 17, 1, "\""},
		{0xe2120000, 15, 1, "/"},
		{0xe2140000, 14, 1, "&"},
		{0xe2180000, 13, 7, "gemelli"},
		{0xe2200000, 11, 6, "Italia"},
		{0xe2400000, 10, 1, "q"},
		{0xe2800000, 11, 5, "cerca"},
		{0xe2a00000, 11, 5, "mondo"},
		{0xe2c00000, 13, 5, "banda"},
		{0xe2c80000, 13, 1, "X"},
		{0xe2d00000, 12, 3, "uno"},
		{0xe2e00000, 12, 5, "amici"},
		{0xe2f00000, 13, 5, "Marco"},
		{0xe2f80000, 13, 6, "grande"},
		{0xe3000000, 10, 1, "F"},
		{0xe3400000, 13, 14, "programmazione"},
		{0xe3480000, 13, 14, "Programmazione"},
		{0xe3500000, 12, 4, "2002"},
		{0xe3600000, 11, 6, "storia"},
		{0xe3800000, 10, 1, "3"},
		{0xe3c00000, 11, 1, "x"},
		{0xe3e00000, 13, 5, "prima"},
		{0xe3e80000, 13, 6, "esseri"},
		{0xe3f00000, 13, 5, "crede"},
		{0xe3f80000, 13, 5, "vuole"},
		{0xe4000000, 6, 1, "c"},
		{0xe8000000, 5, 1, "t"},
		{0xf0000000, 8, 2, "si"},
		{0xf1000000, 9, 3, "del"},
		{0xf1800000, 9, 2, "lo"},
		{0xf2000000, 7, 1, "l"},
		{0xf4000000, 11, 6, "giorno"},
		{0xf4200000, 11, 12, "Informazione"},
		{0xf4400000, 12, 6, "Stream"},
		{0xf4500000, 13, 6, "grandi"},
		{0xf4580000, 13, 4, "deve"},
		{0xf4600000, 11, 1, "K"},
		{0xf4800000, 9, 1, "B"},
		{0xf5000000, 13, 5, "nella"},
		{0xf5080000, 13, 5, "viene"},
		{0xf5100000, 13, 6, "domani"},
		{0xf5180000, 13, 3, "Dal"},
		{0xf5200000, 11, 3, "the"},
		{0xf5400000, 10, 3, "and"},
		{0xf5800000, 10, 2, "ad"},
		{0xf5c00000, 10, 1, "9"},
		{0xf6000000, 11, 3, "dal"},
		{0xf6200000, 12, 5, "tempo"},
		{0xf6300000, 13, 7, "quattro"},
		{0xf6380000, 13, 5, "serie"},
		{0xf6400000, 10, 1, "2"},
		{0xf6800000, 9, 1, "y"},
		{0xf7000000, 11, 3, "nel"},
		{0xf7200000, 13, 7, "Rubrica"},
		{0xf7280000, 13, 4, "John"},
		{0xf7300000, 12, 4, "nato"},
		{0xf7400000, 12, 1, "5"},
		{0xf7500000, 12, 4, "alle"},
		{0xf7600000, 11, 7, "Cartoon"},
		{0xf7800000, 13, 6, "uomini"},
		{0xf7880000, 13, 7, "giovani"},
		{0xf7900000, 12, 10, "Drammatico"},
		{0xf7a00000, 11, 2, "Un"},
		{0xf7c00000, 10, 1, "I"},
		{0xf8000000, 5, 1, "a"}
};

static huff_data_t sky_nz_data{
		{0x00000000, 6, 1, "s"},
		{0x10000000, 9, 0, ""},
		{0x12000000, 9, 1, "S"},
		{0x14000000, 12, 1, "4"},
		{0x14400000, 13, 1, ";"},
		{0x14600000, 14, 9, "Breakfast"},
		{0x14700000, 15, 6, "Europe"},
		{0x14780000, 16, 1, "/"},
		{0x147c0000, 16, 7, "English"},
		{0x14800000, 11, 1, "J"},
		{0x15000000, 10, 1, "P"},
		{0x16000000, 9, 1, "T"},
		{0x18000000, 8, 1, "w"},
		{0x1c000000, 8, 1, "p"},
		{0x20000000, 6, 1, "r"},
		{0x30000000, 6, 1, "o"},
		{0x40000000, 10, 1, "B"},
		{0x41000000, 11, 1, "O"},
		{0x41800000, 11, 19, "(Stereo) (Teletext)"},
		{0x42000000, 10, 1, "C"},
		{0x43000000, 13, 1, "!"},
		{0x43200000, 15, 7, "America"},
		{0x43280000, 15, 9, "Australia"},
		{0x43300000, 15, 8, "Business"},
		{0x43380000, 15, 5, "Drama"},
		{0x43400000, 12, 1, "9"},
		{0x43800000, 11, 8, "(Stereo)"},
		{0x44000000, 8, 1, "y"},
		{0x48000000, 7, 1, "d"},
		{0x50000000, 6, 1, "i"},
		{0x60000000, 6, 1, "t"},
		{0x70000000, 6, 1, "n"},
		{0x80000000, 9, 1, "k"},
		{0x82000000, 10, 1, "'"},
		{0x83000000, 11, 1, "L"},
		{0x83800000, 15, 4, "Hill"},
		{0x83880000, 15, 4, "Mark"},
		{0x83900000, 15, 5, "House"},
		{0x83980000, 16, 4, "Late"},
		{0x839c0000, 17, 12, "(Widescreen)"},
		{0x839e0000, 17, 9, "Education"},
		{0x83a00000, 13, 1, "&"},
		{0x83c00000, 12, 1, "3"},
		{0x84000000, 8, 1, "f"},
		{0x88000000, 11, 1, "G"},
		{0x88800000, 12, 1, "7"},
		{0x88c00000, 14, 4, "year"},
		{0x88d00000, 15, 3, "Get"},
		{0x88d80000, 16, 5, "Girls"},
		{0x88dc0000, 16, 6, "Golden"},
		{0x88e00000, 13, 4, "John"},
		{0x89000000, 10, 1, "M"},
		{0x8a000000, 12, 1, "2"},
		{0x8a400000, 12, 1, "6"},
		{0x8a800000, 15, 5, "Black"},
		{0x8a880000, 15, 4, "East"},
		{0x8a900000, 15, 4, "From"},
		{0x8a980000, 15, 9, "Headlines"},
		{0x8aa00000, 15, 4, "Home"},
		{0x8aa80000, 15, 3, "Man"},
		{0x8ab00000, 16, 5, "Learn"},
		{0x8ab40000, 16, 6, "Little"},
		{0x8ab80000, 15, 1, "Q"},
		{0x8ac00000, 13, 1, "8"},
		{0x8ae00000, 14, 1, "*"},
		{0x8af00000, 15, 9, "Including"},
		{0x8af80000, 15, 4, "Bill"},
		{0x8b000000, 10, 1, "-"},
		{0x8c000000, 8, 1, "g"},
		{0x90000000, 6, 1, "a"},
		{0xa0000000, 7, 1, "l"},
		{0xa8000000, 9, 1, "v"},
		{0xaa000000, 11, 1, "F"},
		{0xaa800000, 11, 1, "H"},
		{0xab000000, 12, 1, ")"},
		{0xab400000, 14, 12, "Directed by "},
		{0xab500000, 15, 4, "Good"},
		{0xab580000, 15, 3, "How"},
		{0xab600000, 13, 1, "q"},
		{0xab800000, 16, 7, "Cartoon"},
		{0xab840000, 16, 7, "Channel"},
		{0xab880000, 16, 5, "Final"},
		{0xab8c0000, 28, 4, "Plus"},
		{0xab8c0040, 28, 6, "Prayer"},
		{0xab8c0080, 28, 7, "Present"},
		{0xab8c00c0, 28, 12, "Presented by"},
		{0xab8c0100, 28, 4, "Quiz"},
		{0xab8c0140, 28, 8, "Regional"},
		{0xab8c0180, 28, 9, "Represent"},
		{0xab8c01c0, 28, 8, "Resource"},
		{0xab8c0200, 28, 6, "Review"},
		{0xab8c0240, 28, 7, "Richard"},
		{0xab8c0280, 28, 6, "School"},
		{0xab8c02c0, 28, 6, "Series"},
		{0xab8c0300, 28, 7, "Service"},
		{0xab8c0340, 28, 4, "Show"},
		{0xab8c0380, 28, 5, "Smith"},
		{0xab8c03c0, 28, 5, "South"},
		{0xab8c0400, 28, 5, "Sport"},
		{0xab8c0440, 28, 4, "Star"},
		{0xab8c0480, 28, 6, "Street"},
		{0xab8c04c0, 28, 2, "TV"},
		{0xab8c0500, 28, 8, "Teaching"},
		{0xab8c0540, 28, 3, "The"},
		{0xab8c0580, 28, 5, "Today"},
		{0xab8c05c0, 28, 7, "Tonight"},
		{0xab8c0600, 28, 7, "Weather"},
		{0xab8c0640, 28, 7, "Western"},
		{0xab8c0680, 28, 11, "Westminster"},
		{0xab8c06c0, 28, 7, "William"},
		{0xab8c0700, 28, 4, "With"},
		{0xab8c0740, 28, 5, "World"},
		{0xab8c0780, 28, 5, "about"},
		{0xab8c07c0, 28, 13, "action-packed"},
		{0xab8c0800, 28, 9, "adventure"},
		{0xab8c0840, 28, 9, "afternoon"},
		{0xab8c0880, 28, 5, "alert"},
		{0xab8c08c0, 28, 13, "all-star cast"},
		{0xab8c0900, 28, 3, "and"},
		{0xab8c0940, 28, 8, "anywhere"},
		{0xab8c0980, 28, 8, "audience"},
		{0xab8c09c0, 28, 5, "based"},
		{0xab8c0a00, 28, 4, "book"},
		{0xab8c0a40, 28, 8, "business"},
		{0xab8c0a80, 28, 3, "but"},
		{0xab8c0ac0, 28, 9, "celebrity"},
		{0xab8c0b00, 28, 6, "chance"},
		{0xab8c0b40, 28, 4, "chat"},
		{0xab8c0b80, 28, 5, "child"},
		{0xab8c0bc0, 28, 7, "classic"},
		{0xab8c0c00, 28, 8, "consumer"},
		{0xab8c0c40, 28, 11, "contestants"},
		{0xab8c0c80, 28, 9, "continues"},
		{0xab8c0cc0, 28, 13, "controversial"},
		{0xab8c0d00, 28, 6, "dealer"},
		{0xab8c0d40, 28, 7, "deliver"},
		{0xab8c0d80, 28, 7, "discuss"},
		{0xab8c0dc0, 28, 8, "document"},
		{0xab8c0e00, 28, 5, "drama"},
		{0xab8c0e40, 28, 7, "edition"},
		{0xab8c0e80, 28, 9, "education"},
		{0xab8c0ec0, 28, 6, "events"},
		{0xab8c0f00, 28, 5, "every"},
		{0xab8c0f40, 28, 9, "excellent"},
		{0xab8c0f80, 28, 4, "eyed"},
		{0xab8c0fc0, 28, 6, "family"},
		{0xab8c1000, 28, 6, "famous"},
		{0xab8c1040, 28, 6, "featur"},
		{0xab8c1080, 28, 4, "film"},
		{0xab8c10c0, 28, 8, "football"},
		{0xab8c1100, 28, 3, "for"},
		{0xab8c1140, 28, 4, "from"},
		{0xab8c1180, 28, 17, "general knowledge"},
		{0xab8c11c0, 28, 3, "get"},
		{0xab8c1200, 28, 5, "guest"},
		{0xab8c1240, 28, 6, "guests"},
		{0xab8c1280, 28, 3, "has"},
		{0xab8c12c0, 28, 4, "have"},
		{0xab8c1300, 28, 8, "headline"},
		{0xab8c1340, 28, 3, "her"},
		{0xab8c1380, 28, 3, "his"},
		{0xab8c13c0, 28, 15, "home and abroad"},
		{0xab8c1400, 28, 4, "host"},
		{0xab8c1440, 28, 3, "how"},
		{0xab8c1480, 28, 2, "in"},
		{0xab8c14c0, 28, 9, "including"},
		{0xab8c1500, 28, 13, "international"},
		{0xab8c1540, 28, 9, "interview"},
		{0xab8c1580, 28, 9, "introduce"},
		{0xab8c15c0, 28, 10, "investigat"},
		{0xab8c1600, 28, 7, "invites"},
		{0xab8c1640, 28, 5, "issue"},
		{0xab8c1680, 28, 9, "knowledge"},
		{0xab8c16c0, 28, 4, "life"},
		{0xab8c1700, 28, 4, "live"},
		{0xab8c1740, 28, 4, "look"},
		{0xab8c1780, 28, 8, "magazine"},
		{0xab8c17c0, 28, 6, "meets "},
		{0xab8c1800, 28, 7, "morning"},
		{0xab8c1840, 28, 16, "morning magazine"},
		{0xab8c1880, 28, 5, "music"},
		{0xab8c18c0, 28, 4, "near"},
		{0xab8c1900, 28, 7, "network"},
		{0xab8c1940, 28, 3, "new"},
		{0xab8c1980, 28, 10, "new series"},
		{0xab8c19c0, 28, 5, "night"},
		{0xab8c1a00, 28, 2, "of"},
		{0xab8c1a40, 28, 2, "on"},
		{0xab8c1a80, 28, 6, "onight"},
		{0xab8c1ac0, 28, 3, "out"},
		{0xab8c1b00, 28, 4, "over"},
		{0xab8c1b40, 28, 4, "part"},
		{0xab8c1b80, 28, 6, "people"},
		{0xab8c1bc0, 28, 5, "phone"},
		{0xab8c1c00, 28, 4, "poli"},
		{0xab8c1c40, 28, 6, "police"},
		{0xab8c1c80, 28, 19, "political chat show"},
		{0xab8c1cc0, 28, 7, "popular"},
		{0xab8c1d00, 28, 13, "presented by "},
		{0xab8c1d40, 28, 8, "programm"},
		{0xab8c1d80, 28, 4, "quiz"},
		{0xab8c1dc0, 28, 14, "reconstruction"},
		{0xab8c1e00, 28, 6, "report"},
		{0xab8c1e40, 28, 6, "review"},
		{0xab8c1e80, 28, 6, "school"},
		{0xab8c1ec0, 28, 6, "series"},
		{0xab8c1f00, 28, 6, "short "},
		{0xab8c1f40, 28, 4, "show"},
		{0xab8c1f80, 28, 4, "some"},
		{0xab8c1fc0, 28, 8, "starring"},
		{0xab8c2000, 28, 5, "stars"},
		{0xab8c2040, 28, 7, "stories"},
		{0xab8c2080, 28, 5, "story"},
		{0xab8c20c0, 28, 6, "studio"},
		{0xab8c2100, 28, 8, "surprise"},
		{0xab8c2140, 28, 6, "teller"},
		{0xab8c2180, 28, 4, "that"},
		{0xab8c21c0, 28, 3, "the"},
		{0xab8c2200, 28, 5, "their"},
		{0xab8c2240, 28, 4, "them"},
		{0xab8c2280, 28, 4, "they"},
		{0xab8c22c0, 28, 4, "this"},
		{0xab8c2300, 28, 7, "through"},
		{0xab8c2340, 28, 2, "to"},
		{0xab8c2380, 28, 3, "top"},
		{0xab8c23c0, 28, 5, "trans"},
		{0xab8c2400, 28, 5, "under"},
		{0xab8c2440, 28, 2, "up"},
		{0xab8c2480, 28, 4, "very"},
		{0xab8c24c0, 28, 5, "video"},
		{0xab8c2500, 28, 4, "view"},
		{0xab8c2540, 28, 7, "vintage"},
		{0xab8c2580, 28, 5, "visit"},
		{0xab8c25c0, 28, 3, "was"},
		{0xab8c2600, 28, 3, "way"},
		{0xab8c2640, 28, 4, "week"},
		{0xab8c2680, 28, 4, "well"},
		{0xab8c26c0, 28, 4, "what"},
		{0xab8c2700, 28, 4, "when"},
		{0xab8c2740, 28, 5, "which"},
		{0xab8c2780, 28, 5, "while"},
		{0xab8c27c0, 28, 3, "who"},
		{0xab8c2800, 28, 4, "will"},
		{0xab8c2840, 28, 3, "win"},
		{0xab8c2880, 28, 4, "with"},
		{0xab8c28c0, 28, 5, "words"},
		{0xab8c2900, 28, 5, "world"},
		{0xab8c2940, 28, 7, "written"},
		{0xab8c2980, 29, 0, ""},
		{0xab8c29a0, 29, 0, ""},
		{0xab8c29c0, 29, 0, ""},
		{0xab8c29e0, 29, 0, ""},
		{0xab8c2a00, 29, 0, ""},
		{0xab8c2a20, 29, 0, ""},
		{0xab8c2a40, 29, 0, ""},
		{0xab8c2a60, 29, 0, ""},
		{0xab8c2a80, 29, 0, ""},
		{0xab8c2aa0, 29, 0, ""},
		{0xab8c2ac0, 29, 0, ""},
		{0xab8c2ae0, 29, 0, ""},
		{0xab8c2b00, 29, 0, ""},
		{0xab8c2b20, 29, 0, ""},
		{0xab8c2b40, 29, 0, ""},
		{0xab8c2b60, 29, 0, ""},
		{0xab8c2b80, 29, 0, ""},
		{0xab8c2ba0, 29, 0, ""},
		{0xab8c2bc0, 29, 0, ""},
		{0xab8c2be0, 29, 0, ""},
		{0xab8c2c00, 29, 0, ""},
		{0xab8c2c20, 29, 0, ""},
		{0xab8c2c40, 29, 0, ""},
		{0xab8c2c60, 29, 0, ""},
		{0xab8c2c80, 29, 0, ""},
		{0xab8c2ca0, 29, 0, ""},
		{0xab8c2cc0, 29, 0, ""},
		{0xab8c2ce0, 29, 0, ""},
		{0xab8c2d00, 29, 0, ""},
		{0xab8c2d20, 29, 0, ""},
		{0xab8c2d40, 29, 1, "\""},
		{0xab8c2d60, 29, 1, "#"},
		{0xab8c2d80, 29, 1, "%"},
		{0xab8c2da0, 29, 1, "+"},
		{0xab8c2dc0, 29, 1, "="},
		{0xab8c2de0, 29, 1, "\\"},
		{0xab8c2e00, 29, 1, "^"},
		{0xab8c2e20, 29, 1, "_"},
		{0xab8c2e40, 29, 1, "{"},
		{0xab8c2e60, 29, 1, "|"},
		{0xab8c2e80, 29, 1, "}"},
		{0xab8c2ea0, 29, 1, "~"},
		{0xab8c2ec0, 29, 0, ""},
		{0xab8c2ee0, 29, 0, ""},
		{0xab8c2f00, 29, 0, ""},
		{0xab8c2f20, 29, 0, ""},
		{0xab8c2f40, 29, 0, ""},
		{0xab8c2f60, 29, 0, ""},
		{0xab8c2f80, 29, 0, ""},
		{0xab8c2fa0, 29, 0, ""},
		{0xab8c2fc0, 29, 0, ""},
		{0xab8c2fe0, 29, 0, ""},
		{0xab8c3000, 29, 0, ""},
		{0xab8c3020, 29, 0, ""},
		{0xab8c3040, 29, 0, ""},
		{0xab8c3060, 29, 0, ""},
		{0xab8c3080, 29, 0, ""},
		{0xab8c30a0, 29, 0, ""},
		{0xab8c30c0, 29, 0, ""},
		{0xab8c30e0, 29, 0, ""},
		{0xab8c3100, 29, 0, ""},
		{0xab8c3120, 29, 0, ""},
		{0xab8c3140, 29, 0, ""},
		{0xab8c3160, 29, 0, ""},
		{0xab8c3180, 29, 0, ""},
		{0xab8c31a0, 29, 0, ""},
		{0xab8c31c0, 29, 0, ""},
		{0xab8c31e0, 29, 0, ""},
		{0xab8c3200, 29, 0, ""},
		{0xab8c3220, 29, 0, ""},
		{0xab8c3240, 29, 0, ""},
		{0xab8c3260, 29, 0, ""},
		{0xab8c3280, 29, 0, ""},
		{0xab8c32a0, 29, 0, ""},
		{0xab8c32c0, 29, 1, " "},
		{0xab8c3460, 29, 0, ""},
		{0xab8c36e0, 29, 1, "?"},
		{0xab8c3860, 29, 1, "?"},
		{0xab8c38a0, 29, 1, "?"},
		{0xab8c38c0, 29, 1, "?"},
		{0xab8c3a60, 29, 1, "?"},
		{0xab8c3c60, 29, 0, ""},
		{0xab8c3ec0, 29, 7, "Minutes"},
		{0xab8c3ee0, 29, 4, "More"},
		{0xab8c3f00, 29, 7, "Morning"},
		{0xab8c3f20, 29, 6, "Murder"},
		{0xab8c3f40, 29, 6, "Nation"},
		{0xab8c3f60, 29, 10, "Neighbours"},
		{0xab8c3f80, 29, 3, "New"},
		{0xab8c3fa0, 29, 14, "News & Weather"},
		{0xab8c3fc0, 29, 16, "News And Weather"},
		{0xab8c3fe0, 29, 4, "Paul"},
		{0xab8c4000, 20, 1, "@"},
		{0xab8c8000, 19, 1, "["},
		{0xab8d0000, 18, 1, "$"},
		{0xab8e0000, 17, 6, "Action"},
		{0xab900000, 14, 8, "Meridian"},
		{0xaba00000, 13, 1, "U"},
		{0xabc00000, 13, 1, "Y"},
		{0xabe00000, 15, 7, "Britain"},
		{0xabe80000, 15, 4, "Call"},
		{0xabf00000, 15, 6, "George"},
		{0xabf80000, 16, 11, "(Including "},
		{0xabfc0000, 16, 3, "BBC"},
		{0xac000000, 8, 1, "m"},
		{0xb0000000, 9, 1, ","},
		{0xb2000000, 10, 1, "W"},
		{0xb3000000, 12, 1, "z"},
		{0xb3400000, 13, 3, "you"},
		{0xb3600000, 16, 3, "Big"},
		{0xb3640000, 16, 5, "Extra"},
		{0xb3680000, 15, 7, "Michael"},
		{0xb3700000, 15, 4, "Blue"},
		{0xb3780000, 16, 4, "Look"},
		{0xb37c0000, 16, 10, "Adventures"},
		{0xb3800000, 11, 1, "1"},
		{0xb4000000, 8, 1, "u"},
		{0xb8000000, 7, 1, "h"},
		{0xc0000000, 5, 1, " "},
		{0xe0000000, 9, 1, "b"},
		{0xe2000000, 10, 1, "A"},
		{0xe3000000, 12, 10, "(Teletext)"},
		{0xe3400000, 13, 1, "j"},
		{0xe3600000, 16, 4, "Baby"},
		{0xe3640000, 16, 5, "Clock"},
		{0xe3680000, 17, 9, "Financial"},
		{0xe36a0000, 17, 9, "Hollywood"},
		{0xe36c0000, 17, 5, "Lunch"},
		{0xe36e0000, 19, 1, "]"},
		{0xe36e8000, 19, 0, ""},
		{0xe36f0000, 18, 1, "X"},
		{0xe3700000, 14, 3, "For"},
		{0xe3800000, 11, 1, "D"},
		{0xe4000000, 8, 1, "c"},
		{0xe8000000, 12, 1, "E"},
		{0xe8400000, 12, 1, "I"},
		{0xe8800000, 15, 4, "Live"},
		{0xe8880000, 16, 12, "(New Series)"},
		{0xe88c0000, 16, 6, "Comedy"},
		{0xe8900000, 16, 5, "Great"},
		{0xe8940000, 16, 4, "Hour"},
		{0xe8980000, 16, 13, "International"},
		{0xe89c0000, 16, 4, "Last"},
		{0xe8a00000, 13, 1, "("},
		{0xe8c00000, 13, 2, ": "},
		{0xe8e00000, 15, 7, "British"},
		{0xe8e80000, 15, 6, "(Part "},
		{0xe8f00000, 16, 6, "London"},
		{0xe8f40000, 16, 6, "French"},
		{0xe8f80000, 15, 1, "<"},
		{0xe9000000, 11, 1, "0"},
		{0xe9800000, 12, 8, "(Repeat)"},
		{0xe9c00000, 12, 1, "K"},
		{0xea000000, 12, 1, "5"},
		{0xea400000, 13, 1, "`"},
		{0xea600000, 15, 1, ">"},
		{0xea680000, 16, 4, "Hear"},
		{0xea6c0000, 17, 7, "Country"},
		{0xea6e0000, 17, 8, "Animated"},
		{0xea700000, 14, 1, "?"},
		{0xea800000, 15, 1, "Z"},
		{0xea880000, 16, 4, "Away"},
		{0xea8c0000, 16, 4, "Best"},
		{0xea900000, 16, 3, "ITN"},
		{0xea940000, 17, 4, "Cook"},
		{0xea960000, 17, 4, "Golf"},
		{0xea980000, 17, 9, "Hampshire"},
		{0xea9a0000, 17, 9, "Important"},
		{0xea9c0000, 16, 8, "Children"},
		{0xeaa00000, 13, 1, "V"},
		{0xeac00000, 12, 1, "x"},
		{0xeb000000, 11, 1, "R"},
		{0xeb800000, 11, 1, "N"},
		{0xec000000, 9, 1, "."},
		{0xee000000, 9, 0, ""},
		{0xf0000000, 6, 1, "e"}
};



static inline auto& get_table(opentv_table_type_t t) {
	switch (t) {
	default:
	case opentv_table_type_t::SKY_UK:
		return sky_uk_data;
	case opentv_table_type_t::SKY_IT:
		return sky_it_data;
	case opentv_table_type_t::SKY_NZ:
		return sky_nz_data;
	}
}


bool opentv_decode_string(ss::string_& ret, unsigned char* data, unsigned int n, opentv_table_type_t t) {

	auto& table = get_table(t);

	unsigned char* p = data; // current input byte
	int pbits = 8;					 // number of bits still present in p[0]
	unsigned char* pend = p + n;
	unsigned int code = 0;
	int next_codebit = 32; // number of bits still to be processed in code
	unsigned int val = (*p++);
	val <<= 2;
	val &= 0xff;
	pbits -= 2;
	while (next_codebit < 32 || pbits > 0) {
		// fill code completely with 32 bits of data,
		// except at the very end
		while (next_codebit > 0) {
			// maximum number of bits that can be added to code
			int numbits = std::min(pbits, next_codebit);
			int shift = next_codebit - 8;
			if (shift >= 0)
				code |= (val << shift);
			else
				code |= (val >> (-shift));
			pbits -= numbits;
			next_codebit -= numbits;
			if (pbits > 0 ) {
				val <<= numbits;
				val &= 0xff;
			} else if (p < pend) {
				val = *p++;
				pbits = 8;
			} else {
				break;
			}
		}

		auto& res = table.decode_piece(code, t);
		if (!res.numbits)
			return false; // something is wrong because we don't make progress
		if (res.numbits > 32- next_codebit)
			break;

		ret.append(res.data, res.data_len+1);

		code <<= res.numbits;
		next_codebit += res.numbits;
	}
	return true;
}
